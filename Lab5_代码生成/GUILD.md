# 代码生成作业

## 问题描述

请在词法分析、语法分析及错误处理作业的基础上，为编译器实现语义分析、代码生成功能。输入输出及处理要求如下：

1. 需根据文法规则及语义约定，采用自顶向下的语法制导翻译技术，进行语义分析并生成目标代码。
2. 对于生成MIPS的编译器，约定如下：
   - 完成编译器，将源文件（统一命名为testfile.txt）编译生成MIPS汇编并输出到文件（统一命名为mips.txt），具体要求包括：
     - a）强烈建议同学们自行设计四元式中间代码，再从中间代码生成MIPS汇编，设计实现输出中间代码的有关函数
     - b）后续的作业如果参加竞速排序，请提前预留代码优化有关的接口，并设计方便切换开启/关闭优化的模式
     - c）自行调试时，可使用Mars仿真器（已上传至平台课程文档），提交到平台的编译器只需要能按统一的要求生成MIPS汇编代码文件即可
     - d）此类提交的编译器请仅读取testfile.txt文件并生成相应的MIPS代码，编译器自身不要读入标准输入中的内容。

## 输入形式
testfile.txt为符合文法要求的测试程序。另外可能存在来自于标准输入的数据。

## 输出形式
按如上要求将目标代码生成结果输出至mips.txt中。

## 样例

### 样例输入
```c
int test;
int main(){
    printf("Hello World\n");
    test = getint();
    printf("%d",test);
    return 0;
}
```

### 样例输出
编译器生成的目标代码 mips.txt，此处省略

### 评分标准
评测机会利用Mars读取并运行mips目标代码

标准输入 input.txt 如下（此处的输入是生成的mips目标代码的输入，同学们的编译器无需考虑此输入）：
```
1906
```

目标代码得到的输出 output.txt 如下：
```
Hello World
1906
```

按生成的目标代码的运行结果与预期结果不一致的行数扣分，每项扣10%。

## 特别说明
1. 本次作业测试程序中包含全部文法。
2. 本次作业仅用正确的测试程序进行考核。
3. Mars使用教程参考：https://blog.csdn.net/myf_666/article/details/116194264；在本次作业中，同学们需要经常利用Mars检测自己生成的MIPS代码的正确性。

## 开发语言及环境
用 C/C++/JAVA 实现，机房安装的 C/C++ 开发环境是 CLion 2018.3.4 和 CodeBlocks 20.03；Java 的开发环境为 IDEA 2018.3.6 社区版。产生的 MIPS 汇编在 Mars 模拟器（更正版）上运行，平台支持 C++11 标准。评测机所采用的编译学生代码的版本是：C/C++ gcc 8.1.0，Java jdk 1.8。

## 附加
在我们的文法中有提到，算符的优先级和结合性以及计算规则(含逻辑运算的"短路计算")与 C 语言一致。

样例可见下面的代码：
```c
int count = 0;
int f () {
    count = count + 1;
    return count;
}

int main() {
    int arr1[2] = {1,1};
    int i = 0;
    int k = 0;
    if (i < -1 && f() < 1) {
        printf("count: %d\n", count);
    }
    if (i < -1 && f() < 1 || k < 2) {
        printf("count: %d\n", count);
    }
    printf("count: %d\n", count);
    return 0;
}
```

正确输出为：
```
count = 0
count = 0
```